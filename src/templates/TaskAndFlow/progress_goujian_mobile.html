{% extends "base_mobile.html" %} {% block ownerhead %}
<script src="/js/commonopr.js" type="text/javascript"></script>
<script src="/js/zepto.min.js" type="text/javascript"></script>

<link href="/css/swipercss/swiper.min.css" media="all" rel="stylesheet" type="text/css" />
<script src="/js/swiperjs/swiper.min.js" type="text/javascript"></script>

<script src="/js/common/progress_goujian_mobile.js?version=(20170903)"></script>
<link type="text/css" href="css/project/morris.css" media="all" rel="stylesheet" />
<script src="/js/weui-master/zepto.min.js"></script>

<link href="/css/project/goujian_yanshou_mobile.css" media="all" rel="stylesheet" type="text/css" /> {% endblock %} {% block content %}
<div class="swiper-container swiper-container-topnav">
	<div class="swiper-wrapper topnav">
		{% for each in list_types %}
		<div class="swiper-slide" tapmode="on" onclick="loadType(this,'{{each}}',{{forloop.counter}}-1)">
			{{each}}
		</div>
		{% endfor %}
	</div>
</div>


<div class="swiper-container swiper-container-maincontont">
	<div class="swiper-wrapper">
		<div class="swiper-slide tab-pane fade in active" id="statusTabGoujian">
			<div class="row-fluid">
				<div class="title_row">
					<h3 style="font-size: 20px;"><i class="fa fa-th"></i> </h3>
				</div>
				<div class="filterOpt" style="width: 100%;float: left;">
		            	
						    <select name="unitProject" class="select-control unitProject"  style="width: 50%;float: left;" onchange="unitPrjChange()">
								{% for unitPro in unitProjectList %}
									<option value="{{unitPro.id}}">{{unitPro.name}}</option>
								{% endfor %}
							</select>
							<select name="pbelevation" class="select-control pbelevation" style="width: 50%;float: left;"  onchange="pbelevationChange()" multiple="true">
								{% for ele in Elevationlist %}
									<option value="{{ele.id}}">{{ele.name}}</option>
								{% endfor %}
							</select>
					
					
							<select name="pbmajor" class="select-control pbmajor" style="width: 50%;float: left;"  onchange="pbmajorChange()">
								<option value="0" selected>选择专业</option>
								{% for majpr in MajorList %}
									<option value="{{majpr.id}}">{{majpr.name}}</option>
								{% endfor %}
							</select>
							
				
							<select name="pbstatus" class="select-control pbstatus" style="width: 50%;float: left;"  onchange="pbstatusChange()" multiple="true">
								{% for each in statuslist %}
									<option value="{{each.id}}">{{each}}</option>
								{% endfor %}
							</select>
		
					

		        </div>
		       <div class="panel-group countyanshou" id="accordion">
		        	<div class="panel panel-default">
						<div class="panel-heading">
							<h4 class="panel-title" data-toggle="collapse" href="#collapseGoujian" data-parent="#accordion">
								进度统计
							</h4>
						</div>
						<div id="collapseGoujian" class="panel-collapse collapse in">
							<div class="panel-body">
								<ul class="list-group countlist">
								    <li class="list-group-item">无进度信息</li>
								</ul>
							</div>
						</div>
					</div>
		        </div>
		
				<div class="list_row">
					<input type="hidden" name="pageNo" id="pageNo" value="1" />
					<table class="table table-striped goujian_table">
						<thead>
							<tr>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		{% if havesheshi %}
		<div class="swiper-slide tab-pane fade in " id="statusTabSheshi">
			<div class="row-fluid">
				<div class="title_row">
					<h3><i class="fa fa-th"></i> </h3>
				</div>
				<div class="filterOpt col-xs-12">
		            	<div class="col-xs-12" style="margin-bottom:5px;">
						    <select name="unitProject" class="col-xs-6  unitProject" onchange="unitPrjChange()">
								{% for unitPro in unitProjectList %}
									<option value="{{unitPro.id}}">{{unitPro.name}}</option>
								{% endfor %}
							</select>
							<select name="pbelevation" class="col-xs-6 pbelevation" onchange="pbelevationChange()" multiple="true">
								{% for ele in Elevationlist %}
									<option value="{{ele.id}}">{{ele.name}}</option>
								{% endfor %}
							</select>
						</div>
						<div class="col-xs-12" style="margin-bottom:5px;">
							<select name="pbmajor" class="col-xs-6 pbmajor" onchange="pbmajorChange()">
								<option value="0" selected>选择专业</option>
								{% for majpr in MajorList %}
									<option value="{{majpr.id}}">{{majpr.name}}</option>
								{% endfor %}
							</select>
							
				
							<select name="pbstatus" class="col-xs-6 pbstatus" onchange="pbstatusChange()" multiple="true">
								{% for each in statuslist %}
									<option value="{{each.id}}">{{each}}</option>
								{% endfor %}
							</select>
		
						</div>

		        </div>
				<div class="list_row">
					<input type="hidden" name="pageNo" id="pageNo" value="1" />
					<table class="table table-striped goujian_table">
						<thead>
							<tr>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		{% endif%}
						
		{% if havejixie %}
		<div class="swiper-slide tab-pane fade in " id="statusTabJixie">
			<div class="row-fluid">
				<div class="title_row">
					<h3 ><i class="fa fa-th"></i> </h3>
				</div>
				<div class="list_row">
					<input type="hidden" name="pageNo" id="pageNo" value="1" />
					<table class="table table-striped goujian_table">
						<thead>
							<tr>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	   {% endif%}
						
		{% if haverenwu %}
		<div class="swiper-slide tab-pane fade in " id="statusTabRenwu">
			<div class="row-fluid">
				<div class="title_row">
					<h3 ><i class="fa fa-th"></i> </h3>
				</div>
				<div class="list_row">
					<input type="hidden" name="pageNo" id="pageNo" value="1" />
					<table class="table table-striped goujian_table">
						<thead>
							<tr>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		{% endif%}
	</div>

</div>

<script type="text/javascript">
	var mySwiperUpdatepb = new Swiper('.swiper-container-maincontont', {
		//	    direction: 'vertical',
		//	    loop: true,
		initialSlide: 0,
		//	    // 如果需要分页器
		//	    pagination: '.swiper-pagination',
		//	    
		//	    // 如果需要前进后退按钮
		//	    nextButton: '.swiper-button-next',
		//	    prevButton: '.swiper-button-prev',
		//	    
		//	    // 如果需要滚动条
		//	    scrollbar: '.swiper-scrollbar',
		onSlideChangeEnd: function(swiper) {
			$(".topnav .open").removeClass("open");
			$($(".topnav .swiper-slide")[swiper.activeIndex]).addClass("open");
			$($(".topnav .swiper-slide")[swiper.activeIndex]).click();
		}
	})

	function loadType(obj, category, id) {
		$(".topnav .open").removeClass("open");
		if(!$(obj).hasClass("open")) {
			$(obj).addClass("open");
		}

		mySwiperUpdatepb.slideTo(id, 1000, false);

		loadTableData(category, 1, "00");
	}
</script>
{% endblock %}